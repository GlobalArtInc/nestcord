---
id: компоненты сообщения
title: Компоненты сообщения
sidebar_position: 3
---

**Компоненты сообщений** — мы назовем их «компоненты», движущиеся вперед, — это основа для добавления интерактивных элементов в сообщения, отправляемые вашим приложением или ботом. Они доступны, настраиваются и просты в использовании.

Существует несколько различных типов компонентов, в этой документации будут изложены основы этой новой основы и каждый пример.

## Кнопка

**Кнопки** — это интерактивные компоненты, отображающие сообщения. Пользователи могут нажимать на них, и при нажатии будет отправлено [взаимодействие](https://discord.com/developers/docs/interactions/receiving-and-responding#interaction-object) в ваше приложение.

```typescript title="src/app.components.ts"
import { Injectable } from '@nestjs/common';
import { Context, Button, ButtonContext } from '@globalart/nestcord';

@Injectable()
export class AppComponents {
    @Button('BUTTON')
    public onButton(@Context() [interaction]: ButtonContext) {
        return interaction. eply({ content: 'Кнопка нажата!' });
    }
}
```

### Динамическая кнопка

Вы можете создать кнопки с динамическим полем `id`. Это полезно для передачи метаданных кнопкам.

Динамические кнопки используют формат [path-to-regexp](https://www.npmjs.com/package/path-to-regexp) для выполнения регулярного сопоставления. Превратите строку пути, такую как `user/:name` в регулярное выражение.

Создавать динамическую кнопку

```typescript
new ButtonBuilder()
  .setCustomId('click/12345')
  .setLabel('LABEL')
  .setStyle(ButtonStyle.Primary)
```

Получить кнопку Динамика

```typescript
import { Injectable } from '@nestjs/common';
import { Context, Button, ButtonContext } from '@globalart/nestcord';

@Injectable()
export class AppComponents {
  @Button('click/:value')
  public onButton(
    @Context() [interaction]: Кнопка Контекст,
    @ComponentParam('value') значение: string
  ) {
    return interaction. eply({ content: `Button click! Значение: ${value}` });
  }
}

```

## Выберите меню

**Выберите меню** — это еще один интерактивный компонент, который отображает сообщения. На рабочем столе щелчок по выбору открывает пользовательский интерфейс в виде выпадающего списка; на мобильном телефоне при нажатии на меню открывается поллист с параметрами.

Discord представил новые избранные компоненты меню :

- «Выбор строк»
- `Пользовательский выбор`
- «Выбор роля»
- `Упоминаемый выбор`
- `Выбор канала`

### Выбор строки

**String Select** — это меню Выделения для выбора определенных текстовых опций

Чтобы создать строку выбрать:

```typescript
new StringSelectMenuBuilder()
  .setCustomId('STRING_SELECT_MENU') // заменить на ваш customId
  .setPlaceholder('Выберите цвет')
  . etMaxValues(1)
  .setMinValues(1)
  . etOption([
    { label: 'Red', value: 'Red' },
    { label: 'Blue', value: 'Blue' },
    { label: 'Yellow', value: 'Yellow' }
])
```

Чтобы получить строку выбрать:

```typescript
импортировать { Injectable } из '@nestjs/common';
импортировать { Context, StringSelect, StringSelectContext, SelectedStrings } из '@globalart/nestcord';

@Injectable()
export class AppComponents {
    @StringSelect('STRING_SELECT_MENU')
    public onStringSelect(
      @Context() [interaction]: StringSelectContext,
      @SelectedStrings() выбрано: string[]
    ) {
      return interaction. eply({
        содержимое: `Ваш выбранный цвет - ${selected. oin(' ')}`
      });
    }
}
```

### Выбор пользователя

**Выбор пользователей** — это меню выбора пользователей

Для создания Пользователя:

```typescript
new UserSelectMenuBuilder()
  .setCustomId('USER_SELECT_MENU')
  .setPlaceholder('Выберите пользователя')
  .setMaxValues(1)
  .setMinValues(1)
```

Для получения пользовательского выбора:

```typescript
импорт { Injectable } из '@nestjs/common';
import { 
  Context,
  UserSelect,
  UserSelectContext,
  SelectedUser,
  ISelectedUser,
  SelectedMembers,
  ISelectedMembers
} из '@globalart/nestcord';

@Injectable()
export class AppComponents {
    @UserSelect('USER_SELECT_MENU')
    public onUserSelect(
      @Context() [interaction]: UserSelectContext,
      @SelectedUsers() пользователей: выбранные пользователи, // Коллекция пользователей
      @SelectedMembers() членов: ISelectedMembers // Коллекция членов
    ) {
      взаимодействия. eply({
        content: `
        Selected users - ${users. ap(пользователь => пользователь). sername).join(',')}\n
        Selected members - ${members. ap(member => member.user?.username). oin(',')}
        `
      });
    }
}
```

### Выбор роли

**Выбор роли** — это меню выбора ролей

Для создания роли выбрать:

```typescript
new RoleSelectMenuBuilder()
  .setCustomId('ROLE_SELECT_MENU')
  .setPlaceholder('Выберите роль')
  .setMaxValues(1)
  .setMinValues(1)
```

Чтобы получить роль выбрать:

```typescript
импорт { Injectable } из '@nestjs/common';
импортировать { 
  Контекст,
  Роль, Выбор,
  РолеSelectContext,
  SelectedRole,
  ISelectedRole,
} из '@globalart/nestcord';

@Injectable()
export class AppComponents {
    @RoleSelect('ROLE_SELECT_MENU')
    public onRoleSelect(
      @Context() [interaction]: RoleSelectContext,
      роли @SelectedRoles(): ISelectedRoles, // Сбор ролей
    ) {
      взаимодействия. eply({
        content: `
        Selected roles - ${roles. ap(роль => роль. d).join(',')}
        `
      });
    }
}
```

### Выбор канала

**Выбор канала** — это меню выбора каналов

Для создания канала выбрать:

```typescript
новый ChannelSelectMenuBuilder()
  .setCustomId('CHANNEL_SELECT_MENU')
  .setPlaceholder('Выберите канал')
  .setMaxValues(1)
  .setMinValues(1)
```

Для получения канала выберите канал:

```typescript
импорт { Injectable } из '@nestjs/common';
импорт { 
  Контекст,
  ChannelSelect,
  ChannelSelectContext,
  Выбранный Канал,
  ISelectedChannel,
} из '@globalart/nestcord';

@Injectable()
export class AppComponents {
    @ChannelSelect('CHANNEL_SELECT_MENU')
    public onChannelSelect(
      @Context() [interaction]: ChannelSelectContext,
      @SelectedChannels() каналы: ISelectedChannels, // Сбор каналов
    ) {
      взаимодействия. eply({
        content: `
        Selected channels - ${channels. ap(канал => канал. d).join(',')}
        `
      });
    }
}
```

### Упоминаемый выбор

**Упоминаемый выбор** – это меню выбора упоминаний (пользователей и ролей)

Чтобы создать упоминаемый выбор:

```typescript
new MentionableSelectMenuBuilder()
  .setCustomId('MENTIONABLE_SELECT_MENU')
  .setPlaceholder('Выберите пользователя/роль')
  .setMaxValues(1)
  .setMinValues(1)
```

Чтобы получить упоминаемый выбор:

```typescript
import { Injectable } from '@nestjs/common';
import { 
  Context,
  MentionableSelect,
  MentionableSelectContext,
  SelectedUsers,
  ISelectedUsers,
  SelectedMembers,
  ISelectedMembers,
  SelectedRoles,
  ISelectedRoles,
} from '@globalart/nestcord';

@Injectable()
export class AppComponents {
    @MentionableSelect('MENTIONABLE_SELECT_MENU')
    public onMentionableSelect(
      @Context() [interaction]: MentionableSelectContext,
      @SelectedUsers() users: ISelectedUsers,
      @SelectedMembers() members: ISelectedMembers,
      @SelectedRoles() roles: ISelectedRoles
    ) {
      return interaction.reply({
        content: `
        Selected users - ${users.map(user => user.username).join(',')}\n
        Selected members - ${members.map(member => member.user?.username).join(',')}\n
        Selected roles - ${roles.map(role => role.name).join(',')}
        `
      });
    }
}
```

### Динамическое меню

Все типы меню Select Menu поддерживают динамический `id` используя формат [path-to-regexp](https://www.npmjs.com/package/path-to-regexp).

Для создания динамического меню выберите

```typescript
new StringSelectMenuBuilder()
  .setCustomId('preferences/color')
  .setPlaceholder('Выберите цвет')
  .setMaxValues(1)
  .setMinValues(1)
  .setOptions([
    { label: 'Red', value: 'Red' },
    { label: 'Blue', value: 'Blue' },
    { label: 'Yellow', value: 'Yellow' }
])
```

Чтобы получить динамическое меню выберите меню

```typescript
импорт { Injectable } из '@nestjs/common';
импорт { Context, StringSelect, StringSelectContext,SelectedStrings } из '@globalart/nestcord';

@Injectable()
export class AppComponents {
    @StringSelect('preferences/:item')
	public onPreferenceSelect(
		@Context() [interaction]: StringSelectContext,
		@SelectedStrings() values: string[],
		@ComponentParam('item') item: string
	) {
		return interaction. eply({
			content: `
      ${item} = ${values. oin(',')}\n
      `
		});
	}
}

```

Динамические меню выбора совместимы с :

- `StringSelect`
- `UserSelect`
- `Выбор роля`
- `MentionableSelect`
- `ChannelSelect`
