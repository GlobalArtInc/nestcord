---
id: старт
slug: старт
title: Начало работы
description: Готовы начать работу с nestcord? Это руководство поможет вам начать с nestcord, и покажет как создать вашего первого бота!
sidebar_position: 2
---

В этой статье вы узнаете об основах nestcord, и о том, как она интегрируется с [NestJS](https://nestjs.com/)!

:::tip

Многие концепции, проходящие с nestcord, предназначены для использования как другие компоненты в проекте [NestJS](https://nestjs.com/).\
Мы рекомендуем вам ознакомиться с [документацией NestJS](https://docs.nestjs.com/), особенно с ее секцией [overview](https://docs.nestjs.com/first-steps), прежде чем начать.

:::

Первым шагом является установка nestcord и его зависимость, [`Discord.js`](https://discord.js.org)

```bash npm2yarn
npm install @globalart/nestcord discord.js
```

:::tip
Вам нужно установить [Node.js](https://nodejs.org/en/) v16.0.0 или новее, чтобы использовать NestCord и Discord.js.
:::

## Модуль

NestCord это модуль, как и любой другой, и может быть импортирован как таковой в вашем приложении Nest .

:::note Модули NestJS

Не уверены, что такое модуль? Catch up by reading about them in [NestJS](https://docs.nestjs.com/modules)!

:::

```typescript title="src/discord.module.ts"
import { Module } from '@nestjs/common';
import { AppService } from './app.service';
import { IntentsBitField } from 'discord. s';

@Module({
    imports: [
        NestCordModule. orRoot({
            token: процесс. nv.DISCORD_TOKEN,
            intents: [IntentsBitField.Flags.Guilds],
            разработка: [process.env.DISCORD_DEVELOPMENT_GUILD_ID]
        })
    ],
    провайдеров: [AppService]
})
класс экспорта DiscordModule {}
```

:::info

Убедитесь, что настроен правильный **[intents](https://discordjs.guide/popular-topics/intents.html#privileged-intents)** обязательный для вашего приложения!

:::

Аргументами модуля являются расширение discord.js [ClientOptions](https://discord.js.org/#/docs/discord.js/stable/typedef/ClientOptions), в дополнение к 3 опциям nestcord: `token`, `prefix` и `development`.

```ts
экспортируемый интерфейс NestCordModuleOptions расширяет DiscordClientOptions {
    token: string;
    префикс? string | (message: Message) => string | Promise<string>;
    development? Snowflake[] | false;
    skipRegistration?: boolean;
    skipGetCommandInfoFromDiscord?: boolean;
}
```

| Свойства                         | Тип                                             | Описание                                                                                                       |
| -------------------------------- | ----------------------------------------------- | -------------------------------------------------------------------------------------------------------------- |
| «Токен»                          | `строка`                                        | Ваш Discord токен                                                                                              |
| `префикс`                        | `string` или `(сообщение: Сообщение) => строка` | Префикс для вашего бота                                                                                        |
| «Развитие»                       | `Snowflake[]` или `false`                       | Развитие гильдий для вашего бота                                                                               |
| `skipRegistration`               | `boolean`                                       | Пропустить автоматическую регистрацию команд приложения                                                        |
| `skipGetCommandInfoFromDiscord`  | `boolean`                                       | Пропустить информацию о команде automic fetch из DiscordAPI, DiscordResponse будет null в CommandDiscovery     |

:::caution Предупреждение

Если у вас есть команды, используя свойство `guilds`, глобальный аргумент разработчика \*\*не перезапишет его.

:::

## Слэш команды

Лучший способ взаимодействия с вашими пользователями - это использовать [Slash команды](https://support.discord.com/hc/en-us/articles/1500000368501-Slash-Commands-FAQ)!
Слэш команды позволяют создавать команды с точными аргументами и выборами, обеспечивая пользователям лучший опыт.

Чтобы создать команду с помощью NestCord, можно использовать декоратор `SlashCommand`.

```typescript title="src/app.service.ts"
import { Injectable } from '@nestjs/common';
import { Context, SlashCommand, SlashCommandContext } from '@globalart/nestcord';

@Injectable()
export class AppService {
    @SlashCommand({
        name: 'ping',
        описание: 'Команда пинга!
    })
    public async onPing(@Context() [interaction]: SlashCommandContext) {
        return interaction. eply({ content: 'Pong!' });
    }
}
```

:::tip

Когда клиент войдет в систему, он автоматически регистрирует все команды.
Глобальные команды кэшируются в течение одного часа, поэтому чтобы избежать кэша глобальных команд, используйте аргумент `development` в модуле NestCord. Это ограничит команду одной гильдией, не позволяя ей поймать кэш.

:::

## Запуск приложения

Вы можете выполнить следующую команду в командной строке ОС, чтобы запустить приложение, прослушивающее события Discord API:

```bash npm2yarn
Запуск $ npm
```
